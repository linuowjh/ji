<!--pages/memorial/create/create.wxml-->
<view class="container">
  <form bindsubmit="submitForm">
    <!-- åŸºç¡€ä¿¡æ¯ -->
    <view class="section card">
      <view class="section-title">åŸºç¡€ä¿¡æ¯</view>
      
      <!-- ç…§ç‰‡ä¸Šä¼  -->
      <view class="form-item">
        <text class="form-label">é€è€…ç…§ç‰‡</text>
        <view class="avatar-upload" bindtap="uploadAvatar">
          <image wx:if="{{formData.avatarUrl}}" class="avatar-preview" src="{{formData.avatarUrl}}" mode="aspectFill"></image>
          <view wx:else class="avatar-placeholder">
            <text class="placeholder-icon">ğŸ“·</text>
            <text class="placeholder-text">ç‚¹å‡»ä¸Šä¼ ç…§ç‰‡</text>
          </view>
        </view>
      </view>

      <!-- å§“å -->
      <view class="form-item">
        <text class="form-label">é€è€…å§“å *</text>
        <input class="form-input" placeholder="è¯·è¾“å…¥é€è€…å§“å" value="{{formData.deceasedName}}" bindinput="inputName" />
      </view>

      <!-- å‡ºç”Ÿæ—¥æœŸ -->
      <view class="form-item">
        <text class="form-label">å‡ºç”Ÿæ—¥æœŸ *</text>
        <picker mode="date" value="{{formData.birthDate}}" bindchange="selectBirthDate">
          <view class="form-picker">
            <text wx:if="{{formData.birthDate}}">{{formData.birthDate}}</text>
            <text wx:else class="picker-placeholder">è¯·é€‰æ‹©å‡ºç”Ÿæ—¥æœŸ</text>
          </view>
        </picker>
      </view>

      <!-- é€ä¸–æ—¥æœŸ -->
      <view class="form-item">
        <text class="form-label">é€ä¸–æ—¥æœŸ *</text>
        <picker mode="date" value="{{formData.deathDate}}" bindchange="selectDeathDate">
          <view class="form-picker">
            <text wx:if="{{formData.deathDate}}">{{formData.deathDate}}</text>
            <text wx:else class="picker-placeholder">è¯·é€‰æ‹©é€ä¸–æ—¥æœŸ</text>
          </view>
        </picker>
      </view>

      <!-- ç”Ÿå¹³ç®€ä»‹ -->
      <view class="form-item">
        <text class="form-label">ç”Ÿå¹³ç®€ä»‹</text>
        <textarea class="form-textarea" placeholder="è¯·è¾“å…¥ç”Ÿå¹³ç®€ä»‹..." value="{{formData.biography}}" bindinput="inputBiography" maxlength="500"></textarea>
      </view>
    </view>

    <!-- çºªå¿µé¦†é£æ ¼ -->
    <view class="section card">
      <view class="section-title">çºªå¿µé¦†é£æ ¼</view>
      
      <!-- ä¸»é¢˜é£æ ¼ -->
      <view class="form-item">
        <text class="form-label">ä¸»é¢˜é£æ ¼</text>
        <picker mode="selector" range="{{themeOptions}}" range-key="label" value="{{formData.themeStyle}}" bindchange="selectTheme">
          <view class="form-picker">
            <text>{{themeOptions[formData.themeStyle] ? themeOptions[formData.themeStyle].label : 'è¯·é€‰æ‹©ä¸»é¢˜é£æ ¼'}}</text>
          </view>
        </picker>
      </view>

      <!-- å¢“ç¢‘æ ·å¼ -->
      <view class="form-item">
        <text class="form-label">å¢“ç¢‘æ ·å¼</text>
        <picker mode="selector" range="{{tombstoneOptions}}" range-key="label" value="{{formData.tombstoneStyle}}" bindchange="selectTombstone">
          <view class="form-picker">
            <text>{{tombstoneOptions[formData.tombstoneStyle] ? tombstoneOptions[formData.tombstoneStyle].label : 'è¯·é€‰æ‹©å¢“ç¢‘æ ·å¼'}}</text>
          </view>
        </picker>
      </view>

      <!-- å¢“å¿—é“­ -->
      <view class="form-item">
        <text class="form-label">å¢“å¿—é“­</text>
        <textarea class="form-textarea" placeholder="è¯·è¾“å…¥å¢“å¿—é“­..." value="{{formData.epitaph}}" bindinput="inputEpitaph" maxlength="100"></textarea>
      </view>
    </view>

    <!-- éšç§è®¾ç½® -->
    <view class="section card">
      <view class="section-title">éšç§è®¾ç½®</view>
      
      <view class="form-item">
        <text class="form-label">è®¿é—®æƒé™</text>
        <picker mode="selector" range="{{privacyOptions}}" range-key="label" value="{{formData.privacyLevel}}" bindchange="selectPrivacy">
          <view class="form-picker">
            <text>{{privacyOptions[formData.privacyLevel - 1].label}}</text>
          </view>
        </picker>
      </view>
    </view>

    <!-- æäº¤æŒ‰é’® -->
    <button class="btn-primary submit-btn" formType="submit">{{mode === 'create' ? 'åˆ›å»ºçºªå¿µé¦†' : 'ä¿å­˜ä¿®æ”¹'}}</button>
  </form>
</view>
